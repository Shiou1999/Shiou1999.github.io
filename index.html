<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <title>陸姊手工水餃</title>
	<img src="banner.jpg" width="200" height="100">
    </head>
    <script src='//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js'>
		var item = [
		["高麗菜豬肉水餃",170,100],
		["韮菜豬肉水餃",170,100],
		["玉米豬肉水餃",170,100],
		["泡菜豬肉水餃",170,100],
		["青蔥豬肉水餃",170,100],
		["蝦仁豬肉水餃",400,240],
		["素食水餃",170,100],
		["素食泡菜水餃",170,100],];
		
		var listLength = item.length;
		var itemBig = [];	//下拉式選單的id
		var itemSmall = [];	//下拉式選單的id
		var itemX = [];		//品項的id
		var stringArray = [];	//明細字串
		var price = 0;
		
		window.onload=function(){ //初始化視窗
			for(let u=0;u<listLength;u++){
				itemSmall[u]="item"+u+"Small";	 //製作id array
				itemBig[u]="item"+u+"Big";		//製作id array
				itemX[u]='item'+u;
				document.getElementById(itemX[u]).textContent = item[u][0]; //修改品項名稱
			}
		}

		function getInt(idName){	//取選單中的整數值
			return parseInt(document.getElementById(idName).value);
		}		
		
		function submit(){
			stringArray = [];
			price = 0;
			let prc = 0;	//小計
			for(let i=0;i<listLength;i++){	//抽取選擇的品項
				if(getInt(itemBig[i])>0 || getInt(itemSmall[i])>0){
					prc = item[i][1]*getInt(itemBig[i]) + item[i][2]*getInt(itemSmall[i]); //小計
					stringArray = stringArray + item[i][0] + "：" + getInt(itemBig[i]) + "大包、" + getInt(itemSmall[i]) + "小包" + prc + "$\n";
					price += prc;
				}
			}
			stringArray += "總金額：" + price + "$";
			
			document.getElementById('resultHeader').innerText = "訂單明細";
			document.getElementById('resultText').innerText = stringArray; //顯示清單
			var myPhone = "0910437989"
    			$.ajax({
  				type: "post",
  				data: {
  					"method": "write",
  					"name": "Github",
 					"phone": myPhone,
  					"list": "fromGithub\nheyhey"
  					},
  				url: "https://script.google.com/macros/s/AKfycbwH6jlTo48Io1LRAVjcG_xoxIIiNHLGGVQA2DUzgV2MZmpOuK-beD0ziZmWvm6-Y-s/exec" // 填入網路應用程式網址
    				});
		}
		
		
		
		function test(){	//testing
			document.getElementById('resultText').textContent = "test2";
		}
		
		 
		
    </script>
    <body>
		<h1>水餃訂購單製作</h1>
        <p>請輸入姓名<input type="text" id='name'></p>
		<p>請輸入電話<input type="text" id='phone'></p>

		<h2>~~手工水餃~~</h2>
		<table>
			<tr>
				<th>品項</th>
				<th>大包數量</th>
				<th>小包數量</th>
			</tr>
			<tr> <!--item0-->
				<td id="item0">item的第0項,之後會被初始化取代字串</td>
				<td>
					<select id="item0Big">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
				<td>
					<select id="item0Small">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
			</tr>
			<tr> <!--item1-->
				<td id="item1">item的第1項,之後會被初始化取代字串</td>
				<td>
					<select id="item1Big">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
				<td>
					<select id="item1Small">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
			</tr>
			<tr> <!--item2-->
				<td id="item2">item的第2項,之後會被初始化取代字串</td>
				<td>
					<select id="item2Big">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
				<td>
					<select id="item2Small">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
			</tr>
			<tr>  <!--item3-->
				<td id="item3">item的第3項,之後會被初始化取代字串</td>
				<td>
					<select id="item3Big">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
				<td>
					<select id="item3Small">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
			</tr>			
			<tr>  <!--item4-->
				<td id="item4">item的第4項,之後會被初始化取代字串</td>
				<td>
					<select id="item4Big">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
				<td>
					<select id="item4Small">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
			</tr>
			<tr>  <!--item5-->
				<td id="item5">item的第5項,之後會被初始化取代字串</td>
				<td>
					<select id="item5Big">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
				<td>
					<select id="item5Small">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
			</tr>
			<tr>  <!--item6-->
				<td id="item6">item的第6項,之後會被初始化取代字串</td>
				<td>
					<select id="item6Big">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
				<td>
					<select id="item6Small">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
			</tr>
			<tr>  <!--item7-->
				<td id="item7">item的第7項,之後會被初始化取代字串</td>
				<td>
					<select id="item7Big">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
				<td>
					<select id="item7Small">
						<option>0</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</select>
				</td>
			</tr>
		</table>
		<h2>~~手工千張~~</h2>
		
		
		
        <p><button onclick="submit()">訂單試算</button></p>
		<p><button onclick="test()">測試按鈕</button></p>
		
		<h1 id="resultHeader"></h1>
		<p><em id="resultText"></em></p>

    </body>
</html>

			
